import{d as gr}from"/build/_shared/chunk-5CAC6VCH.js";import{e as yr}from"/build/_shared/chunk-242LWQVT.js";var V=yr(gr(),1),se=e=>e.type==="checkbox",X=e=>e instanceof Date,T=e=>e==null,He=e=>typeof e=="object",E=e=>!T(e)&&!Array.isArray(e)&&He(e)&&!X(e),Ke=e=>E(e)&&e.target?se(e.target)?e.target.checked:e.target.value:e,hr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ge=(e,t)=>e.has(hr(t)),ie=e=>Array.isArray(e)?e.filter(Boolean):[],p=e=>e===void 0,c=(e,t,r)=>{if(!t||!E(e))return r;let i=ie(t.split(/[,[\].]+?/)).reduce((a,l)=>T(a)?a:a[l],e);return p(i)||i===e?p(e[t])?r:e[t]:i},de={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},N={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_r=V.default.createContext(null),De=()=>V.default.useContext(_r);var ze=(e,t,r,i=!0)=>{let a={defaultValues:t._defaultValues};for(let l in e)Object.defineProperty(a,l,{get:()=>{let h=l;return t._proxyFormState[h]!==N.all&&(t._proxyFormState[h]=!i||N.all),r&&(r[h]=!0),e[h]}});return a},L=e=>E(e)&&!Object.keys(e).length,Je=(e,t,r)=>{let{name:i,...a}=e;return L(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!r||N.all))},ce=e=>Array.isArray(e)?e:[e],Qe=(e,t,r)=>r&&t?e===t:!e||!t||e===t||ce(e).some(i=>i&&(i.startsWith(t)||t.startsWith(i)));function Ee(e){let t=V.default.useRef(e);t.current=e,V.default.useEffect(()=>{let r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Ar(e){let t=De(),{control:r=t.control,disabled:i,name:a,exact:l}=e||{},[h,g]=V.default.useState(r._formState),F=V.default.useRef(!0),m=V.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),x=V.default.useRef(a);return x.current=a,Ee({disabled:i,callback:V.default.useCallback(_=>F.current&&Qe(x.current,_.name,l)&&Je(_,m.current)&&g({...r._formState,..._}),[r,l]),subject:r._subjects.state}),V.default.useEffect(()=>(F.current=!0,()=>{F.current=!1}),[]),ze(h,r,m.current,!1)}var I=e=>typeof e=="string",Xe=(e,t,r,i)=>{let a=Array.isArray(e);return I(e)?(i&&t.watch.add(e),c(r,e)):a?e.map(l=>(i&&t.watch.add(l),c(r,l))):(i&&(t.watchAll=!0),r)},vr=e=>{let t=e.constructor&&e.constructor.prototype;return E(t)&&t.hasOwnProperty("isPrototypeOf")},pe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function K(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(pe&&(e instanceof Blob||e instanceof FileList))&&(r||E(e)))if(t=r?[]:{},!Array.isArray(e)&&!vr(e))t=e;else for(let i in e)t[i]=K(e[i]);else return e;return t}function mr(e){let t=De(),{control:r=t.control,name:i,defaultValue:a,disabled:l,exact:h}=e||{},g=V.default.useRef(i);g.current=i,Ee({disabled:l,subject:r._subjects.watch,callback:V.default.useCallback(x=>{if(Qe(g.current,x.name,h)){let _=Xe(g.current,r._names,x.values||r._formValues);m(p(g.current)||!p(_)?K(_):p(_)?a:_)}},[r,h,a])});let[F,m]=V.default.useState(p(a)?r._getWatch(i):a);return V.default.useEffect(()=>r._removeUnmounted()),F}function br(e){let t=De(),{name:r,control:i=t.control,shouldUnregister:a}=e,l=Ge(i._names.array,r),h=mr({control:i,name:r,defaultValue:c(i._formValues,r,c(i._defaultValues,r,e.defaultValue)),exact:!0}),g=Ar({control:i,name:r}),F=V.default.useRef(i.register(r,{...e.rules,value:h}));return V.default.useEffect(()=>{let m=(x,_)=>{let A=c(i._fields,x);A&&(A._f.mount=_)};return m(r,!0),()=>{let x=i._options.shouldUnregister||a;(l?x&&!i._stateFlags.action:x)?i.unregister(r):m(r,!1)}},[r,i,l,a]),{field:{name:r,value:h,onChange:V.default.useCallback(m=>F.current.onChange({target:{value:Ke(m),name:r},type:de.CHANGE}),[r]),onBlur:V.default.useCallback(()=>F.current.onBlur({target:{value:c(i._formValues,r),name:r},type:de.BLUR}),[r,i]),ref:m=>{let x=c(i._fields,r);x&&m&&(x._f.ref={focus:()=>m.focus(),select:()=>m.select(),setCustomValidity:_=>m.setCustomValidity(_),reportValidity:()=>m.reportValidity()})}},formState:g,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(g.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(g.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(g.touchedFields,r)},error:{enumerable:!0,get:()=>c(g.errors,r)}})}}var Ur=e=>e.render(br(e)),Fr=(e,t,r,i,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:a||!0}}:{},Ce=e=>/^\w*$/.test(e),Ye=e=>ie(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,t,r){let i=-1,a=Ce(t)?[t]:Ye(t),l=a.length,h=l-1;for(;++i<l;){let g=a[i],F=r;if(i!==h){let m=e[g];F=E(m)||Array.isArray(m)?m:isNaN(+a[i+1])?{}:[]}e[g]=F,e=e[g]}return e}var ke=(e,t,r)=>{for(let i of r||Object.keys(e)){let a=c(e,i);if(a){let{_f:l,...h}=a;if(l&&t(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else E(h)&&ke(h,t)}}};var Pe=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length)))),xr=(e,t,r)=>{let i=ie(c(e,r));return w(i,"root",t[r]),w(e,r,i),e},Z=e=>typeof e=="boolean",Re=e=>e.type==="file",ye=e=>typeof e=="function",fe=e=>I(e)||V.default.isValidElement(e),Oe=e=>e.type==="radio",ge=e=>e instanceof RegExp,Be={value:!1,isValid:!1},Ne={value:!0,isValid:!0},Ze=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!p(e[0].attributes.value)?p(e[0].value)||e[0].value===""?Ne:{value:e[0].value,isValid:!0}:Ne:Be}return Be},Ie={isValid:!1,value:null},er=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ie):Ie;function je(e,t,r="validate"){if(fe(e)||Array.isArray(e)&&e.every(fe)||Z(e)&&!e)return{type:r,message:fe(e)?e:"",ref:t}}var Q=e=>E(e)&&!ge(e)?e:{value:e,message:""},qe=async(e,t,r,i,a)=>{let{ref:l,refs:h,required:g,maxLength:F,minLength:m,min:x,max:_,pattern:A,validate:H,name:M,valueAsNumber:ne,mount:Ae,disabled:j}=e._f;if(!Ae||j)return{};let q=h?h[0]:l,W=v=>{i&&q.reportValidity&&(q.setCustomValidity(Z(v)?"":v||""),q.reportValidity())},S={},ee=Oe(l),ae=se(l),G=ee||ae,z=(ne||Re(l))&&!l.value||t===""||Array.isArray(t)&&!t.length,P=Fr.bind(null,M,r,S),ue=(v,b,D,C=$.maxLength,B=$.minLength)=>{let U=v?b:D;S[M]={type:v?C:B,message:U,ref:l,...P(v?C:B,U)}};if(a?!Array.isArray(t)||!t.length:g&&(!G&&(z||T(t))||Z(t)&&!t||ae&&!Ze(h).isValid||ee&&!er(h).isValid)){let{value:v,message:b}=fe(g)?{value:!!g,message:g}:Q(g);if(v&&(S[M]={type:$.required,message:b,ref:q,...P($.required,b)},!r))return W(b),S}if(!z&&(!T(x)||!T(_))){let v,b,D=Q(_),C=Q(x);if(!T(t)&&!isNaN(t)){let B=l.valueAsNumber||t&&+t;T(D.value)||(v=B>D.value),T(C.value)||(b=B<C.value)}else{let B=l.valueAsDate||new Date(t),U=le=>new Date(new Date().toDateString()+" "+le),re=l.type=="time",J=l.type=="week";I(D.value)&&t&&(v=re?U(t)>U(D.value):J?t>D.value:B>new Date(D.value)),I(C.value)&&t&&(b=re?U(t)<U(C.value):J?t<C.value:B<new Date(C.value))}if((v||b)&&(ue(!!v,D.message,C.message,$.max,$.min),!r))return W(S[M].message),S}if((F||m)&&!z&&(I(t)||a&&Array.isArray(t))){let v=Q(F),b=Q(m),D=!T(v.value)&&t.length>v.value,C=!T(b.value)&&t.length<b.value;if((D||C)&&(ue(D,v.message,b.message),!r))return W(S[M].message),S}if(A&&!z&&I(t)){let{value:v,message:b}=Q(A);if(ge(v)&&!t.match(v)&&(S[M]={type:$.pattern,message:b,ref:l,...P($.pattern,b)},!r))return W(b),S}if(H){if(ye(H)){let v=await H(t),b=je(v,q);if(b&&(S[M]={...b,...P($.validate,b.message)},!r))return W(b.message),S}else if(E(H)){let v={};for(let b in H){if(!L(v)&&!r)break;let D=je(await H[b](t),q,b);D&&(v={...D,...P(b,D.message)},W(D.message),r&&(S[M]=v))}if(!L(v)&&(S[M]={ref:q,...v},!r))return S}}return W(!0),S};var We=e=>({isOnSubmit:!e||e===N.onSubmit,isOnBlur:e===N.onBlur,isOnChange:e===N.onChange,isOnAll:e===N.all,isOnTouch:e===N.onTouched});function Vr(e,t){let r=t.slice(0,-1).length,i=0;for(;i<r;)e=p(e)?i++:e[t[i++]];return e}function wr(e){for(let t in e)if(!p(e[t]))return!1;return!0}function O(e,t){let r=Ce(t)?[t]:Ye(t),i=r.length==1?e:Vr(e,r),a=r[r.length-1],l;i&&delete i[a];for(let h=0;h<r.slice(0,-1).length;h++){let g=-1,F,m=r.slice(0,-(h+1)),x=m.length-1;for(h>0&&(l=e);++g<m.length;){let _=m[g];F=F?F[_]:e[_],x===g&&(E(F)&&L(F)||Array.isArray(F)&&wr(F))&&(l?delete l[_]:delete e[_]),l=F}}return e}function Fe(){let e=[];return{get observers(){return e},next:a=>{for(let l of e)l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}}var he=e=>T(e)||!He(e);function Y(e,t){if(he(e)||he(t))return e===t;if(X(e)&&X(t))return e.getTime()===t.getTime();let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let a of r){let l=e[a];if(!i.includes(a))return!1;if(a!=="ref"){let h=t[a];if(X(l)&&X(h)||E(l)&&E(h)||Array.isArray(l)&&Array.isArray(h)?!Y(l,h):l!==h)return!1}}return!0}var Se=e=>{let t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},rr=e=>e.type==="select-multiple",pr=e=>Oe(e)||se(e),xe=e=>Se(e)&&e.isConnected,tr=e=>{for(let t in e)if(ye(e[t]))return!0;return!1};function _e(e,t={}){let r=Array.isArray(e);if(E(e)||r)for(let i in e)Array.isArray(e[i])||E(e[i])&&!tr(e[i])?(t[i]=Array.isArray(e[i])?[]:{},_e(e[i],t[i])):T(e[i])||(t[i]=!0);return t}function sr(e,t,r){let i=Array.isArray(e);if(E(e)||i)for(let a in e)Array.isArray(e[a])||E(e[a])&&!tr(e[a])?p(t)||he(r[a])?r[a]=Array.isArray(e[a])?_e(e[a],[]):{..._e(e[a])}:sr(e[a],T(t)?{}:t[a],r[a]):Y(e[a],t[a])?delete r[a]:r[a]=!0;return r}var Ve=(e,t)=>sr(e,t,_e(t)),ir=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>p(e)?e:t?e===""?NaN:e&&+e:r&&I(e)?new Date(e):i?i(e):e;function we(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return Re(t)?t.files:Oe(t)?er(e.refs).value:rr(t)?[...t.selectedOptions].map(({value:r})=>r):se(t)?Ze(e.refs).value:ir(p(t.value)?e.ref.value:t.value,e)}var kr=(e,t,r,i)=>{let a={};for(let l of e){let h=c(t,l);h&&w(a,l,h._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:i}},te=e=>p(e)?void 0:ge(e)?e.source:E(e)?ge(e.value)?e.value.source:e.value:e,Sr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function $e(e,t,r){let i=c(e,r);if(i||Ce(r))return{error:i,name:r};let a=r.split(".");for(;a.length;){let l=a.join("."),h=c(t,l),g=c(e,l);if(h&&!Array.isArray(h)&&r!==l)return{name:r};if(g&&g.type)return{name:l,error:g};a.pop()}return{name:r}}var Dr=(e,t,r,i,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?i.isOnBlur:a.isOnBlur)?!e:(r?i.isOnChange:a.isOnChange)?e:!0,Er=(e,t)=>!ie(c(e,t)).length&&O(e,t),Cr={mode:N.onSubmit,reValidateMode:N.onChange,shouldFocusError:!0};function Rr(e={}){let t={...Cr,...e},r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},a=K(t.defaultValues)||{},l=t.shouldUnregister?{}:K(a),h={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F,m=0,x={},_={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},A={watch:Fe(),array:Fe(),state:Fe()},H=We(t.mode),M=We(t.reValidateMode),ne=t.criteriaMode===N.all,Ae=s=>n=>{clearTimeout(m),m=window.setTimeout(s,n)},j=async()=>{let s=!1;return _.isValid&&(s=t.resolver?L((await G()).errors):await P(i,!0),s!==r.isValid&&(r.isValid=s,A.state.next({isValid:s}))),s},q=(s,n=[],u,f,d=!0,o=!0)=>{if(f&&u){if(h.action=!0,o&&Array.isArray(c(i,s))){let y=u(c(i,s),f.argA,f.argB);d&&w(i,s,y)}if(_.errors&&o&&Array.isArray(c(r.errors,s))){let y=u(c(r.errors,s),f.argA,f.argB);d&&w(r.errors,s,y),Er(r.errors,s)}if(_.touchedFields&&o&&Array.isArray(c(r.touchedFields,s))){let y=u(c(r.touchedFields,s),f.argA,f.argB);d&&w(r.touchedFields,s,y)}_.dirtyFields&&(r.dirtyFields=Ve(a,l)),A.state.next({isDirty:v(s,n),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else w(l,s,n)},W=(s,n)=>{w(r.errors,s,n),A.state.next({errors:r.errors})},S=(s,n,u,f)=>{let d=c(i,s);if(d){let o=c(l,s,p(u)?c(a,s):u);p(o)||f&&f.defaultChecked||n?w(l,s,n?o:we(d._f)):C(s,o),h.mount&&j()}},ee=(s,n,u,f,d)=>{let o=!1,y={name:s},k=c(r.touchedFields,s);if(_.isDirty){let R=r.isDirty;r.isDirty=y.isDirty=v(),o=R!==y.isDirty}if(_.dirtyFields&&(!u||f)){let R=c(r.dirtyFields,s);Y(c(a,s),n)?O(r.dirtyFields,s):w(r.dirtyFields,s,!0),y.dirtyFields=r.dirtyFields,o=o||R!==c(r.dirtyFields,s)}return u&&!k&&(w(r.touchedFields,s,u),y.touchedFields=r.touchedFields,o=o||_.touchedFields&&k!==u),o&&d&&A.state.next(y),o?y:{}},ae=(s,n,u,f)=>{let d=c(r.errors,s),o=_.isValid&&Z(n)&&r.isValid!==n;if(e.delayError&&u?(F=Ae(()=>W(s,u)),F(e.delayError)):(clearTimeout(m),F=null,u?w(r.errors,s,u):O(r.errors,s)),(u?!Y(d,u):d)||!L(f)||o){let y={...f,...o&&Z(n)?{isValid:n}:{},errors:r.errors,name:s};r={...r,...y},A.state.next(y)}x[s]--,_.isValidating&&!Object.values(x).some(y=>y)&&(A.state.next({isValidating:!1}),x={})},G=async s=>t.resolver?await t.resolver({...l},t.context,kr(s||g.mount,i,t.criteriaMode,t.shouldUseNativeValidation)):{},z=async s=>{let{errors:n}=await G();if(s)for(let u of s){let f=c(n,u);f?w(r.errors,u,f):O(r.errors,u)}else r.errors=n;return n},P=async(s,n,u={valid:!0})=>{for(let f in s){let d=s[f];if(d){let{_f:o,...y}=d;if(o){let k=g.array.has(o.name),R=await qe(d,c(l,o.name),ne,t.shouldUseNativeValidation,k);if(R[o.name]&&(u.valid=!1,n))break;!n&&(c(R,o.name)?k?xr(r.errors,R,o.name):w(r.errors,o.name,R[o.name]):O(r.errors,o.name))}y&&await P(y,n,u)}}return u.valid},ue=()=>{for(let s of g.unMount){let n=c(i,s);n&&(n._f.refs?n._f.refs.every(u=>!xe(u)):!xe(n._f.ref))&&ve(s)}g.unMount=new Set},v=(s,n)=>(s&&n&&w(l,s,n),!Y(le(),a)),b=(s,n,u)=>{let f={...h.mount?l:p(n)?a:I(s)?{[s]:n}:n};return Xe(s,g,f,u)},D=s=>ie(c(h.mount?l:a,s,e.shouldUnregister?c(a,s,[]):[])),C=(s,n,u={})=>{let f=c(i,s),d=n;if(f){let o=f._f;o&&(!o.disabled&&w(l,s,ir(n,o)),d=pe&&Se(o.ref)&&T(n)?"":n,rr(o.ref)?[...o.ref.options].forEach(y=>y.selected=d.includes(y.value)):o.refs?se(o.ref)?o.refs.length>1?o.refs.forEach(y=>(!y.defaultChecked||!y.disabled)&&(y.checked=Array.isArray(d)?!!d.find(k=>k===y.value):d===y.value)):o.refs[0]&&(o.refs[0].checked=!!d):o.refs.forEach(y=>y.checked=y.value===d):Re(o.ref)?o.ref.value="":(o.ref.value=d,o.ref.type||A.watch.next({name:s})))}(u.shouldDirty||u.shouldTouch)&&ee(s,d,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&J(s)},B=(s,n,u)=>{for(let f in n){let d=n[f],o=`${s}.${f}`,y=c(i,o);(g.array.has(s)||!he(d)||y&&!y._f)&&!X(d)?B(o,d,u):C(o,d,u)}},U=(s,n,u={})=>{let f=c(i,s),d=g.array.has(s),o=K(n);w(l,s,o),d?(A.array.next({name:s,values:l}),(_.isDirty||_.dirtyFields)&&u.shouldDirty&&(r.dirtyFields=Ve(a,l),A.state.next({name:s,dirtyFields:r.dirtyFields,isDirty:v(s,o)}))):f&&!f._f&&!T(o)?B(s,o,u):C(s,o,u),Pe(s,g)&&A.state.next({}),A.watch.next({name:s})},re=async s=>{let n=s.target,u=n.name,f=c(i,u);if(f){let d,o,y=n.type?we(f._f):Ke(s),k=s.type===de.BLUR||s.type===de.FOCUS_OUT,R=!Sr(f._f)&&!t.resolver&&!c(r.errors,u)&&!f._f.deps||Dr(k,c(r.touchedFields,u),r.isSubmitted,M,H),oe=Pe(u,g,k);w(l,u,y),k?(f._f.onBlur&&f._f.onBlur(s),F&&F(0)):f._f.onChange&&f._f.onChange(s);let be=ee(u,y,k,!1),fr=!L(be)||oe;if(!k&&A.watch.next({name:u,type:s.type}),R)return _.isValid&&j(),fr&&A.state.next({name:u,...oe?{}:be});if(!k&&oe&&A.state.next({}),x[u]=x[u]?x[u]+1:1,A.state.next({isValidating:!0}),t.resolver){let{errors:Le}=await G([u]),dr=$e(r.errors,i,u),Me=$e(Le,i,dr.name||u);d=Me.error,u=Me.name,o=L(Le)}else d=(await qe(f,c(l,u),ne,t.shouldUseNativeValidation))[u],j();f._f.deps&&J(f._f.deps),ae(u,o,d,be)}},J=async(s,n={})=>{let u,f,d=ce(s);if(A.state.next({isValidating:!0}),t.resolver){let o=await z(p(s)?s:d);u=L(o),f=s?!d.some(y=>c(o,y)):u}else s?(f=(await Promise.all(d.map(async o=>{let y=c(i,o);return await P(y&&y._f?{[o]:y}:y)}))).every(Boolean),!(!f&&!r.isValid)&&j()):f=u=await P(i);return A.state.next({...!I(s)||_.isValid&&u!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:u}:{},errors:r.errors,isValidating:!1}),n.shouldFocus&&!f&&ke(i,o=>o&&c(r.errors,o),s?d:g.mount),f},le=s=>{let n={...a,...h.mount?l:{}};return p(s)?n:I(s)?c(n,s):s.map(u=>c(n,u))},Te=(s,n)=>({invalid:!!c((n||r).errors,s),isDirty:!!c((n||r).dirtyFields,s),isTouched:!!c((n||r).touchedFields,s),error:c((n||r).errors,s)}),nr=s=>{s?ce(s).forEach(n=>O(r.errors,n)):r.errors={},A.state.next({errors:r.errors})},ar=(s,n,u)=>{let f=(c(i,s,{_f:{}})._f||{}).ref;w(r.errors,s,{...n,ref:f}),A.state.next({name:s,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&f&&f.focus&&f.focus()},ur=(s,n)=>ye(s)?A.watch.subscribe({next:u=>s(b(void 0,n),u)}):b(s,n,!0),ve=(s,n={})=>{for(let u of s?ce(s):g.mount)g.mount.delete(u),g.array.delete(u),c(i,u)&&(n.keepValue||(O(i,u),O(l,u)),!n.keepError&&O(r.errors,u),!n.keepDirty&&O(r.dirtyFields,u),!n.keepTouched&&O(r.touchedFields,u),!t.shouldUnregister&&!n.keepDefaultValue&&O(a,u));A.watch.next({}),A.state.next({...r,...n.keepDirty?{isDirty:v()}:{}}),!n.keepIsValid&&j()},me=(s,n={})=>{let u=c(i,s),f=Z(n.disabled);return w(i,s,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:s}},name:s,mount:!0,...n}}),g.mount.add(s),u?f&&w(l,s,n.disabled?void 0:c(l,s,we(u._f))):S(s,!0,n.value),{...f?{disabled:n.disabled}:{},...t.shouldUseNativeValidation?{required:!!n.required,min:te(n.min),max:te(n.max),minLength:te(n.minLength),maxLength:te(n.maxLength),pattern:te(n.pattern)}:{},name:s,onChange:re,onBlur:re,ref:d=>{if(d){me(s,n),u=c(i,s);let o=p(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,y=pr(o),k=u._f.refs||[];if(y?k.find(R=>R===o):o===u._f.ref)return;w(i,s,{_f:{...u._f,...y?{refs:[...k.filter(xe),o,...Array.isArray(c(a,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),S(s,!1,void 0,o)}else u=c(i,s,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(Ge(g.array,s)&&h.action)&&g.unMount.add(s)}}},Ue=()=>t.shouldFocusError&&ke(i,s=>s&&c(r.errors,s),g.mount),lr=(s,n)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let f=!0,d=K(l);A.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:o,values:y}=await G();r.errors=o,d=y}else await P(i);L(r.errors)?(A.state.next({errors:{},isSubmitting:!0}),await s(d,u)):(n&&await n({...r.errors},u),Ue())}catch(o){throw f=!1,o}finally{r.isSubmitted=!0,A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:L(r.errors)&&f,submitCount:r.submitCount+1,errors:r.errors})}},or=(s,n={})=>{c(i,s)&&(p(n.defaultValue)?U(s,c(a,s)):(U(s,n.defaultValue),w(a,s,n.defaultValue)),n.keepTouched||O(r.touchedFields,s),n.keepDirty||(O(r.dirtyFields,s),r.isDirty=n.defaultValue?v(s,c(a,s)):v()),n.keepError||(O(r.errors,s),_.isValid&&j()),A.state.next({...r}))},cr=(s,n={})=>{let u=s||a,f=K(u),d=s&&!L(s)?f:a;if(n.keepDefaultValues||(a=u),!n.keepValues){if(n.keepDirtyValues)for(let o of g.mount)c(r.dirtyFields,o)?w(d,o,c(l,o)):U(o,c(d,o));else{if(pe&&p(s))for(let o of g.mount){let y=c(i,o);if(y&&y._f){let k=Array.isArray(y._f.refs)?y._f.refs[0]:y._f.ref;if(Se(k)){let R=k.closest("form");if(R){R.reset();break}}}}i={}}l=e.shouldUnregister?n.keepDefaultValues?K(a):{}:f,A.array.next({values:d}),A.watch.next({values:d})}g={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!_.isValid||!!n.keepIsValid,h.watch=!!e.shouldUnregister,A.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!!(n.keepDefaultValues&&!Y(s,a)),isSubmitted:n.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&s?Ve(a,s):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:me,unregister:ve,getFieldState:Te,_executeSchema:G,_focusError:Ue,_getWatch:b,_getDirty:v,_updateValid:j,_removeUnmounted:ue,_updateFieldArray:q,_getFieldArray:D,_subjects:A,_proxyFormState:_,get _fields(){return i},get _formValues(){return l},get _stateFlags(){return h},set _stateFlags(s){h=s},get _defaultValues(){return a},get _names(){return g},set _names(s){g=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:J,register:me,handleSubmit:lr,watch:ur,setValue:U,getValues:le,reset:(s,n)=>cr(ye(s)?s(l):s,n),resetField:or,clearErrors:nr,unregister:ve,setError:ar,setFocus:(s,n={})=>{let u=c(i,s),f=u&&u._f;if(f){let d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),n.shouldSelect&&d.select())}},getFieldState:Te}}function Lr(e={}){let t=V.default.useRef(),[r,i]=V.default.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...Rr(e),formState:r});let a=t.current.control;return a._options=e,Ee({subject:a._subjects.state,callback:V.default.useCallback(l=>{Je(l,a._proxyFormState,!0)&&(a._formState={...a._formState,...l},i({...a._formState}))},[a])}),V.default.useEffect(()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()}),V.default.useEffect(()=>{r.submitCount&&a._focusError()},[a,r.submitCount]),t.current.formState=ze(r,a),t.current}export{c as a,Ur as b,Fr as c,w as d,Lr as e};
